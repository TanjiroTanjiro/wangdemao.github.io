<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://wangdemao.github.io</id>
    <title>Wang Demao&apos;s blog</title>
    <updated>2020-05-17T06:34:01.524Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://wangdemao.github.io"/>
    <link rel="self" href="https://wangdemao.github.io/atom.xml"/>
    <subtitle>温故而知新</subtitle>
    <logo>https://wangdemao.github.io/images/avatar.png</logo>
    <icon>https://wangdemao.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Wang Demao&apos;s blog</rights>
    <entry>
        <title type="html"><![CDATA[用蒙特卡洛模拟算π]]></title>
        <id>https://wangdemao.github.io/post/yong-meng-te-qia-luo-mo-ni-suan-p/</id>
        <link href="https://wangdemao.github.io/post/yong-meng-te-qia-luo-mo-ni-suan-p/">
        </link>
        <updated>2020-05-17T06:29:35.000Z</updated>
        <content type="html"><![CDATA[<p><a href="https://wangdemao.github.io/wangdemao/post/yong-meng-te-qia-luo-mo-ni-suan-p/">更好的阅读体验。</a></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mstyle mathcolor="grey"><mi mathvariant="normal">“</mi><mi mathvariant="normal">相</mi><mi mathvariant="normal">信</mi><mi mathvariant="normal">大</mi><mi mathvariant="normal">家</mi><mi mathvariant="normal">都</mi><mi mathvariant="normal">知</mi><mi mathvariant="normal">道</mi><mi>π</mi><mi mathvariant="normal">，</mi><mi mathvariant="normal">但</mi><mi mathvariant="normal">怎</mi><mi mathvariant="normal">么</mi><mi mathvariant="normal">用</mi><mi>C</mi><mo>+</mo><mo>+</mo><mi mathvariant="normal">算</mi><mi mathvariant="normal">出</mi><mi>π</mi><mi mathvariant="normal">呢</mi><mi mathvariant="normal">，</mi><mi mathvariant="normal">今</mi><mi mathvariant="normal">天</mi><mi mathvariant="normal">我</mi><mi mathvariant="normal">们</mi><mi mathvariant="normal">就</mi><mi mathvariant="normal">来</mi><mi mathvariant="normal">探</mi><mi mathvariant="normal">讨</mi><mi mathvariant="normal">一</mi><mi mathvariant="normal">下</mi><mi mathvariant="normal">。</mi><mi mathvariant="normal">”</mi></mstyle></mrow><annotation encoding="application/x-tex">{\color{grey}“ 相信大家都知道π，但怎么用C++算出π呢，今天我们就来探讨一下。”}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord" style="color:grey;">“</span><span class="mord cjk_fallback" style="color:grey;">相</span><span class="mord cjk_fallback" style="color:grey;">信</span><span class="mord cjk_fallback" style="color:grey;">大</span><span class="mord cjk_fallback" style="color:grey;">家</span><span class="mord cjk_fallback" style="color:grey;">都</span><span class="mord cjk_fallback" style="color:grey;">知</span><span class="mord cjk_fallback" style="color:grey;">道</span><span class="mord mathdefault" style="margin-right:0.03588em;color:grey;">π</span><span class="mord cjk_fallback" style="color:grey;">，</span><span class="mord cjk_fallback" style="color:grey;">但</span><span class="mord cjk_fallback" style="color:grey;">怎</span><span class="mord cjk_fallback" style="color:grey;">么</span><span class="mord cjk_fallback" style="color:grey;">用</span><span class="mord mathdefault" style="margin-right:0.07153em;color:grey;">C</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin" style="color:grey;">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord" style="color:grey;">+</span><span class="mord cjk_fallback" style="color:grey;">算</span><span class="mord cjk_fallback" style="color:grey;">出</span><span class="mord mathdefault" style="margin-right:0.03588em;color:grey;">π</span><span class="mord cjk_fallback" style="color:grey;">呢</span><span class="mord cjk_fallback" style="color:grey;">，</span><span class="mord cjk_fallback" style="color:grey;">今</span><span class="mord cjk_fallback" style="color:grey;">天</span><span class="mord cjk_fallback" style="color:grey;">我</span><span class="mord cjk_fallback" style="color:grey;">们</span><span class="mord cjk_fallback" style="color:grey;">就</span><span class="mord cjk_fallback" style="color:grey;">来</span><span class="mord cjk_fallback" style="color:grey;">探</span><span class="mord cjk_fallback" style="color:grey;">讨</span><span class="mord cjk_fallback" style="color:grey;">一</span><span class="mord cjk_fallback" style="color:grey;">下</span><span class="mord cjk_fallback" style="color:grey;">。</span><span class="mord" style="color:grey;">”</span></span></span></span></span></p>
<h2 id="01算法">01.算法</h2>
<p>相信大家都知道下图中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">方</mi><mi mathvariant="normal">块</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">面</mi><mi mathvariant="normal">积</mi><mo>:</mo><mi mathvariant="normal">圆</mi><mi mathvariant="normal">圈</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">面</mi><mi mathvariant="normal">积</mi><mo>=</mo><mn>4</mn><mo>:</mo><mi>π</mi></mrow><annotation encoding="application/x-tex">方块的面积:圆圈的面积=4:π</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord cjk_fallback">方</span><span class="mord cjk_fallback">块</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">面</span><span class="mord cjk_fallback">积</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mord cjk_fallback">圆</span><span class="mord cjk_fallback">圈</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">面</span><span class="mord cjk_fallback">积</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span></span></span></span>，即<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>π</mi><mo>=</mo><mi mathvariant="normal">圆</mi><mi mathvariant="normal">圈</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">面</mi><mi mathvariant="normal">积</mi><mo>÷</mo><mi mathvariant="normal">方</mi><mi mathvariant="normal">块</mi><mi mathvariant="normal">的</mi><mi mathvariant="normal">面</mi><mi mathvariant="normal">积</mi></mrow><annotation encoding="application/x-tex">π=圆圈的面积÷方块的面积</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord cjk_fallback">圆</span><span class="mord cjk_fallback">圈</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">面</span><span class="mord cjk_fallback">积</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">÷</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0em;vertical-align:0em;"></span><span class="mord cjk_fallback">方</span><span class="mord cjk_fallback">块</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">面</span><span class="mord cjk_fallback">积</span></span></span></span>×4,。</p>
<figure data-type="image" tabindex="1"><img src="https://wangdemao.github.io/post-images/1589697019339.jpg" alt="" loading="lazy"></figure>
<p>我们可以假设圆上有10000个点（数字越大，精度越高），只需要求出每个点和圆心的距离是否大于圆的半径就可以知道这个点是否在圆内，即：</p>
<p>点离圆心的距离=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mrow><mi>a</mi><mi>b</mi><mi>s</mi><mo>(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mn>2.0</mn><mo>−</mo><mi>i</mi><msup><mo>)</mo><mn>2</mn></msup><mo>+</mo><mi>a</mi><mi>b</mi><mi>s</mi><mo>(</mo><mi>n</mi><mi mathvariant="normal">/</mi><mn>2.0</mn><mo>−</mo><mi>j</mi><mo>)</mo><msup><mo>)</mo><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{abs(n/2.0-i)^2+abs(n/2.0-j))^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.30499999999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.935em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord">/</span><span class="mord">2</span><span class="mord">.</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">i</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">s</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord">/</span><span class="mord">2</span><span class="mord">.</span><span class="mord">0</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.8950000000000005em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,
158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067
c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,
175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71
c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,
-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26
s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30499999999999994em;"><span></span></span></span></span></span></span></span></span></p>
<h2 id="02代码实现">02.代码实现</h2>
<p>现在，我们来说代码的具体实现。</p>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;cmath&gt;    //开根号要用到
#include &lt;iomanip&gt;

using namespace std;

long double check(long double i,long double j,long double n)
{
  long double ans=sqrt(double(pow(abs(n/2.0-i),2)+pow(abs(n/2.0-j),2)));		//详见上面的公式 
  
  return ans;
}

int main()
{
  long double pai;
  long double n,incircle=0,square,banjing;
  
  cout&lt;&lt;&quot;请输入模拟次数n: \n由于C++精度所限，无法算得太大\nn=________\b\b\b\b\b\b&quot;;    //输出提示信息 
  cin&gt;&gt;n;		//输入数据 

  square=n*n;
  
  for(long long i=1;i&lt;=n;i++)
  {
    for(long long j=1;j&lt;=n;j++)
    {
      if(check(i,j,n)&lt;=n/2.0)
        incircle++;
    }
  }
  
  pai=((incircle/square)*4.0);		//算出结果 
  
  cout&lt;&lt;&quot;π≈&quot;&lt;&lt;fixed &lt;&lt;setprecision(10)&lt;&lt;pai;

  return 0;
}
</code></pre>
<p>结果：</p>
<figure data-type="image" tabindex="2"><img src="https://wangdemao.github.io/post-images/1589697071256.jpg" alt="" loading="lazy"></figure>
<p>注：由于C++精度问题，可能会有误差</p>
<p>谢谢大家。</p>
]]></content>
    </entry>
</feed>